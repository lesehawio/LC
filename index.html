<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Weekly Tracker and Learning Capsules with abstract shapes.">
    <title>Weekly Tracker & My Capsules</title>
    <link rel="icon" href="https://cdn.imgurl.ir/uploads/j481796_CL.ico" type="image/x-icon">
    <style>
        :root {
            --background-color: #001a4d;
            --text-color: #ff3333;
            --button-color: #FD3132;
            --item-bg-color: rgba(255, 255, 255, 0.2);
            --item-hover-bg-color: rgba(255, 255, 255, 0.3);
            --filled-color: #ff3333;
            --empty-color: rgba(255, 255, 255, 0.2);
        }
        body {
            font-family: Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            height: 100vh;
            padding: 20px;
        }
        .container {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            width: 300px;
            text-align: center;
            margin-bottom: 20px;
        }
        h1 {
            margin-bottom: 20px;
            font-size: 24px;
        }
        .input-group {
            margin: 10px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 16px;
            color: var(--text-color);
        }
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--text-color);
            border-radius: 5px;
            background-color: #fff;
            color: #000;
            font-size: 14px;
        }
        button {
            background-color: var(--button-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #d62c2d;
        }
        .capsule-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        .capsule-item {
            background-color: var(--item-bg-color);
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            position: relative;
            transition: background-color 0.3s;
        }
        .capsule-container {
            width: 100%;
            height: 50px;
            display: flex;
            justify-content: space-between;
            border: 2px solid var(--text-color);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .small-rectangle {
            width: 20%;
            height: 100%;
            background-color: var(--empty-color);
            transition: background-color 0.3s;
        }
        .filled {
            background-color: var(--filled-color);
        }
        .status {
            margin-top: 5px;
            font-weight: bold;
            color: green;
        }
        .footer {
            margin-top: 20px;
            font-size: 14px;
            color: #f0f0f0;
        }
        .next-round-message {
            margin-top: 10px;
            font-weight: bold;
            color: blue;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ø«Ø¨Øª Ú©Ù¾Ø³ÙˆÙ„</h1>
        <div class="input-group">
            <label for="name">Ù†Ø§Ù…:</label>
            <input type="text" id="name" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" required>
        </div>
        <div class="input-group">
            <label for="count">ØªØ¹Ø¯Ø§Ø¯ Ø¯ÙØ¹Ø§Øª ØªÚ©Ø±Ø§Ø±:</label>
            <input type="number" id="count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ø¯ÙØ¹Ø§Øª" required min="1" max="5">
        </div>
        <div class="input-group">
            <label for="startDate">Ø§Ø² ØªØ§Ø±ÛŒØ®:</label>
            <input type="date" id="startDate" required>
        </div>
        <div class="input-group">
            <label for="endDate">ØªØ§ ØªØ§Ø±ÛŒØ®:</label>
            <input type="date" id="endDate" required>
        </div>
        <button id="submitBtn">Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ù¾Ø³ÙˆÙ„</button>
    </div>

    <div class="container">
        <h1>Ú©Ù¾Ø³ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h1>
        <ul class="capsule-list" id="capsuleList">
            <!-- Ú©Ù¾Ø³ÙˆÙ„â€ŒÙ‡Ø§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </ul>
    </div>
    
    <div class="footer">
        with ğŸ¤ by lesehawio
    </div>

    <script>
        const capsules = [];

        document.getElementById('submitBtn').onclick = function() {
            const name = document.getElementById('name').value;
            const count = parseInt(document.getElementById('count').value);
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            if (name && count && startDate && endDate) {
                const capsule = { name, count, startDate, endDate, currentCount: 0 };
                capsules.push(capsule);
                displayCapsules();
                clearForm();
            } else {
                alert('Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.');
            }
        };

        function displayCapsules() {
            const capsuleList = document.getElementById('capsuleList');
            capsuleList.innerHTML = ''; // Clear previous list
            capsules.forEach((capsule, index) => {
                const li = document.createElement('li');
                li.className = 'capsule-item';
                li.innerHTML = `
                    <strong>${capsule.name}</strong><br>
                    <div class="capsule-container" data-count="${capsule.count}">
                        <div class="small-rectangle"></div>
                        <div class="small-rectangle"></div>
                        <div class="small-rectangle"></div>
                        <div class="small-rectangle"></div>
                        <div class="small-rectangle"></div>
                    </div>
                    <div class="status" id="status-${index}"></div>
                    <button onclick="editCapsule(this, ${index})">ÙˆÛŒØ±Ø§ÛŒØ´</button>
                    <div>ØªØ¹Ø¯Ø§Ø¯: ${capsule.count}<br>Ø§Ø² ØªØ§Ø±ÛŒØ®: ${capsule.startDate}<br>ØªØ§ ØªØ§Ø±ÛŒØ®: ${capsule.endDate}</div>`;
                capsuleList.appendChild(li);
            });
        }

        function editCapsule(button, index) {
            const capsuleContainer = button.parentElement.querySelector('.capsule-container');
            const totalCount = capsules[index].count;

            const newCount = prompt("ØªØ¹Ø¯Ø§Ø¯ Ù…Ø³ØªØ·ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø± Ø´Ø¯Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:", 0);

            if (newCount !== null) {
                const validCount = Math.min(Math.max(parseInt(newCount), 0), totalCount); // Limit based on total count
                capsules[index].currentCount = validCount;

                // Fill rectangles based on validCount
                const rectangles = capsuleContainer.querySelectorAll('.small-rectangle');
                rectangles.forEach((rect, i) => {
                    rect.classList.toggle('filled', i < capsules[index].currentCount);
                });

                // Update status
                if (capsules[index].currentCount >= totalCount) {
                    document.getElementById(`status-${index}`).innerText = "ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯";
                } else {
                    document.getElementById(`status-${index}`).innerText = ""; // Clear status if not complete
                }
            }
        }

        function clearForm() {
            document.getElementById('name').value = '';
            document.getElementById('count').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
        }
    </script>
</body>
</html>
